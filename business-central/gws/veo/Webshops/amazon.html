<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Amazon SP API </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Amazon SP API ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../../../../business-central/gws/images/erpsystemicon.png">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <!-- fontawesome added>>> -->
    <link rel="stylesheet" href="../../../../styles/fontawesome.min.css">
    <link rel="stylesheet" href="../../../../styles/solid.min.css">
    <!-- <<<fontawesome added -->
    <link rel="stylesheet" href="../../../../styles/main.css">
    <!-- ownscript added>>> -->
    <link rel="stylesheet" href="../../../../styles/main2.css">
    <!-- <<<ownscript added -->
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../TOC.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <script type="text/javascript">
    var origin = window.location.origin;
    if (window.location.href.indexOf("de-DE") > 0) {
    document.write('<div class="cookie-banner" id="cookie-banner" style="display: none"><p>Um unsere Webseite für Sie optimal zu gestalten und fortlaufend verbessern zu können, verwenden wir Cookies. Durch die weitere Nutzung der Webseite stimmen Sie der Verwendung von Cookies zu.</br>Weitere Informationen zu Cookies erhalten Sie in unserer <a id="privacyPolicy">Datenschutzerklärung</a>.</p><button class="close">OK</button></div>');
    document.getElementById("privacyPolicy").href= origin + "/de-DE/privacyPolicy.html";  
    }
    if (window.location.href.indexOf("en-US") > 0) {
    document.write('<div class="cookie-banner" id="cookie-banner" style="display: none"><p>In order to optimize our website for you and to continuously improve it, we use cookies. By continuing to use the Website, you consent to the use of cookies.</br>For more information about cookies, please see our <a id="privacyPolicy">Privacy Policy</a>.</p><button class="close">OK</button></div>');
    document.getElementById("privacyPolicy").href= origin + "/en-US/privacyPolicy.html";   
    }
    </script>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../business-central/gws/images/gwslogo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Suche" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Suchergebnisse f&#252;r <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="Erste" data-prev="Vorherige" data-next="N&#228;chste" data-last="Letzte"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Inhaltsverzeichnis ein-/ausblenden</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="amazon-sp-api">Amazon SP API</h1>

<p>Mit dem gevis ERP | VEO Connector für die <strong>Amazon SP API</strong> importieren Sie Bestellungen aus dem Shop ins Business Central, definieren das Mapping für die Anlage von Verkaufsaufträgen und melden Lagerbestandsänderungen direkt an Amazon zurück.</p>
<h2 id="so-richten-sie-den-amazon-webshop-ein">So richten Sie den Amazon Webshop ein</h2>
<ol>
<li>Klicken Sie im Menüband <strong>Dynamics 365 Business Central</strong> auf das Symbol <strong>Lupe</strong> <i class="fas fa-search" aria-hidden="true"></i>, geben Sie im Suchfeld <em>Webshops</em> ein und klicken Sie auf das übereinstimmende Suchergebnis.</li>
<li>Klicken Sie im Menüband auf die Schaltfläche <strong>Neu</strong> &gt; <strong>Neu</strong> und legen Sie einen neuen Webshop an.</li>
<li>Geben Sie einen Code (zum Beispiel <em>AMAZON</em>) ein und wählen Sie den Webshop Anbieter <em>Amazon</em> aus.</li>
<li>Richten Sie eine private <a href="https://developer-docs.amazon.com/sp-api/docs/tutorial-create-a-private-selling-partner-api-application">Selling Partner API</a> bei Amazon ein.</li>
<li>Entnehmen Sie dort die relevanten Einrichtungen und Zugriffschlüssel für die LWA Authentifizierung und den Zugriff auf ihr AWS und tragen Sie diese in der Business Central Einrichtung ein.</li>
<li>Klicken Sie im Menüband auf die Schaltfläche <strong>Belegarten</strong>, um eine <strong>Datenaustauschdefinition</strong> für Amazon Aufträge zu hinterlegen.</li>
</ol>
<h2 id="so-importieren-sie-daten-aus-dem-amazon-webshop">So importieren Sie Daten aus dem Amazon Webshop</h2>
<ol>
<li>Klicken Sie im Menüband <strong>Dynamics 365 Business Central</strong> auf das Symbol <strong>Lupe</strong> <i class="fas fa-search" aria-hidden="true"></i>, geben Sie im Suchfeld <em>Webshops</em> ein und wählen Sie <em>AMAZON</em>.</li>
<li>Klicken Sie im Menüband auf die Schaltfläche <strong>Rückmeldungen</strong>.
Auf der Seite <strong>Webshop - Antwortdaten</strong> finden Sie alle Bestellungen, die bisher von Amazon ans Business Central übertragen wurden.</li>
</ol>
<h2 id="so-richten-sie-einen-aufgabenwarteschlangenposten-für-den-auftragsimport-ein">So richten Sie einen Aufgabenwarteschlangenposten für den Auftragsimport ein</h2>
<p>Um einen Aufgabenwarteschlangenposten für den Import von Aufträgen zu erstellen, gehen Sie vor wie in <a href="https://docs.gws.ms/de-DE/geviserpveo/business-central/gws/veo/features/task-queue-item.html">Aufgabenwarteschlangenposten</a> beschrieben.</p>
<div class="NOTE"><h5>Hinweis</h5><p>Verwenden Sie diese Werte für die Einrichtung:<br></p>
<ul>
<li><strong>Art des auszuführenden Objekts</strong>: <em>Bericht</em></li>
<li><strong>ID des auszuführenden Objekts</strong>: <em>70391252 (Importiere Webshop Aufträge)</em></li>
</ul>
</div>
<h2 id="so-legen-sie-das-mapping-an">So legen Sie das Mapping an</h2>
<p>Mit dem Mapping weisen Sie importierte Daten einzelnen Feldern im Business Central zu.
Um ein Mapping anzulegen, brauchen Sie die Daten eines Imports. Wählen Sie auf der Seite <strong>Webshop - Antwortdaten</strong> einen Import aus und klicken Sie im Menüband auf die Schaltfläche <strong>Zugehörig</strong> &gt; <strong>Antwortdaten herunterladen</strong>. Im Editor sehen Sie jetzt die Rohdaten eines Imports.</p>
<!--
> [!TIP]
>Um die Rohdaten im JSON Format lesen zu können, kopieren Sie diese Rohdaten in einen Editor (zum Beispiel ins Notepad++). Sollte der JSON Viewer bei Ihnen noch nicht installiert sein, gehen Sie zunächst so vor:
Klicken Sie auf die Schaltfläche **Plugins** > **Plugin-Verwaltung** und setzen Sie einen Haken bei **JSON Viewer**. Bestätigen Sie das Plugin mit einem Klick auf die Schaltfläche **Installieren**. Jetzt können Sie sich die Rohdaten im JSON Format anzeigen lassen mit einem Klick auf die Schaltfläche **Plugins** > **JSON Viewer** > **JSON Format**.
 -->
<ol>
<li>Klicken Sie im Menüband <strong>Dynamics 365 Business Central</strong> auf das Symbol <strong>Lupe</strong> <i class="fas fa-search" aria-hidden="true"></i>, geben Sie im Suchfeld <em>Datenaustauschdefinitionen</em> ein und klicken Sie auf das übereinstimmende Suchergebnis.</li>
<li>Wählen Sie <em>AZ_ORDER</em> aus und klicken Sie im Menüband auf die Schaltfläche <strong>Bearbeiten</strong>. <br>
Auf der Seite <strong>Datenaustauschdefinition</strong> sind im Inforegister <strong>Zeilendefinitionen</strong> die Zeilenarten <strong>Kopfzeile</strong> (Auftragskopf) und <strong>Detail</strong> (Auftragszeilen) hinterlegt. </li>
<li>Legen Sie im Inforegister <strong>Spaltendefinitionen</strong> fest, welche Daten aus der Importdatei für die einzelnen Zeilenarten eingelesen werden sollen. Vergeben Sie für jede Variable eine <strong>Spaltennr.</strong>, einen <strong>Namen</strong> und hinterlegen Sie den dazugehörigen <strong>Pfad</strong> aus der Importdatei (root/Order/…). <br> Sie können auch mit Konstanten arbeiten (zum Beispiel eine Nummer für den Dokumententyp Verkaufsauftrag oder einen Debitorencode eintragen).</li>
<li>Klicken Sie danach im Menüband des Inforegisters <strong>Zeilendefinitionen</strong> auf die Schaltfläche <strong>Verwalten</strong> &gt; <strong>Feldzuordnung</strong>, um das Mapping anzulegen. </li>
<li>Weisen Sie in der Tabelle <strong>Feldzuordnung</strong> jeder Spaltenbezeichnung, die Sie unter <strong>Spaltendefinitionen</strong> angelegt haben, jeweils ein Tabellenfeld in Business Central zu.</li>
<li>Geben Sie im Feld <strong>Spaltennr.</strong> den Wert ein, den Sie in den <strong>Spaltendefinitionen</strong> vergeben haben.</li>
<li>Klicken Sie im Feld <strong>Zielfeld-ID</strong> auf das Dreipunkt-Menü und wählen Sie den passenden <strong>Feldnamen</strong> in Business Central aus. Bestätigen Sie mit <strong>OK</strong>.</li>
<li>In der Spalte <strong>Transformationsregeln</strong> können Sie bei Bedarf Regeln für die Weiterverarbeitung von importierten Dateninhalten ergänzen (zum Beispiel ein Datum konvertieren). <br>
Öffnen Sie im Feld <strong>Transformationsregeln</strong> die Drop-Down-Liste und klicken Sie auf <strong>Aus vollständiger Liste auswählen</strong>, um die passende Transformationsregel auszuwählen.</li>
</ol>
<div class="NOTE"><h5>Hinweis</h5><p>Eine neue Transformationsregel erstellen Sie mit einem Klick im Feld <strong>Transformationsregeln</strong> auf die Schaltfläche <strong>Neu</strong>. Vergeben Sie in der <strong>Transformationsregelkarte</strong> einen <strong>Code</strong> und eine <strong>Beschreibung</strong>. Um zum Beispiel ein Mapping von internen und externen Einheiten durchzuführen, wählen Sie <strong>Benutzerdefiniert</strong> für das Feld <strong>Transformationstyp</strong> aus. Wählen Sie anschließend für das Feld <strong>Erw. Benutzerdefiniert</strong> eine Funktion aus und legen Sie eine neue Transformationsregel an. Nehmen Sie als <strong>Tabellenname</strong> die Mapping Tabelle <strong>IMA Import Mapping</strong>. Weitere Informationen finden Sie unter <a href="https://docs.gws.ms/de-DE/geviserpveo/business-central/gws/features/dataexchangeframework/transformationrules.html">Erweiterte benutzerdefinierte Transformationsregeln</a>.</p>
</div>
<h2 id="so-erstellen-sie-einen-verkaufsauftrag">So erstellen Sie einen Verkaufsauftrag</h2>
<ol>
<li>Klicken Sie im Menüband <strong>Dynamics 365 Business Central</strong> auf das Symbol <strong>Lupe</strong> <i class="fas fa-search" aria-hidden="true"></i>, geben Sie im Suchfeld <em>Webshop - Antwortdaten</em> ein und klicken Sie auf das übereinstimmende Suchergebnis.</li>
<li>Wählen Sie einen importierten Auftrag aus und klicken Sie im Menüband auf die Schaltfläche <strong>Verarbeite Anfragen</strong>, um einen Verkaufsauftrag in Business Central zu generieren. Ob alle Daten korrekt verarbeitet werden konnten, sehen Sie am Eintrag <em>Verarbeitet</em> im Feld <strong>Status</strong>. </li>
<li>Klicken Sie in der Infobox <strong>Verknüpfte Datensätze</strong> auf den Link <em>Sales Header: Auftrag …</em>, um den neu angelegten Verkaufsauftrag zu öffnen.</li>
<li>Sie können jetzt den Verkaufsauftrag bearbeiten.</li>
</ol>
<div class="NOTE"><h5>Hinweis</h5><p>Der Import wird automatisch fortgesetzt, das heißt Business Central speichert das Datum des letzten Imports und setzt mit jedem Klick auf die Schaltfläche <strong>Import Aufträge</strong> die Übertragung ab dem letzten Abfragedatum automatisch fort. </p>
</div>
<h2 id="so-korrigieren-sie-verarbeitungsfehler">So korrigieren Sie Verarbeitungsfehler</h2>
<p>Wenn ein Verkaufsauftrag nicht erstellt werden konnte, steht <em>Fehlerhaft</em> im Feld <strong>Status</strong>. In der Infobox finden Sie unter <strong>Anhänge</strong> Protokolleinträge für mögliche Verarbeitungsfehler.</p>
<ol>
<li>Klicken Sie im Menüband auf die Schaltfläche <strong>Korrigiere Importdaten</strong>. Sie sehen alle Daten, die für einen Auftrag eingelesen wurden. </li>
<li>Im Feld <strong>Letzte Fehlermeldung</strong> finden Sie eine Fehlermeldung für diesen Auftrag. Sie können die notwendigen Korrekturen in Ihren Stammdaten oder alternativ direkt in der Tabelle im Inforegister <strong>Ungültige Daten Subpages</strong> vornehmen.</li>
<li>Klicken Sie zum Abschluss erneut im Menüband auf <strong>Verarbeite Anfragen</strong>.</li>
</ol>
<h2 id="so-exportieren-sie-lagerbestandsänderungen">So exportieren Sie Lagerbestandsänderungen</h2>
<ol>
<li>Klicken Sie im Menüband <strong>Dynamics 365 Business Central</strong> auf das Symbol <strong>Lupe</strong> <i class="fas fa-search" aria-hidden="true"></i>, geben Sie im Suchfeld <em>Webshop - Artikel</em> ein und klicken Sie auf das übereinstimmende Suchergebnis. </li>
<li>Wählen Sie einen Artikel aus und klicken Sie im Menüband auf die Schaltfläche <strong>Zugehörig</strong> &gt; <strong>Lagerbestandsänderungen</strong>. <br>
Auf der Seite <strong>Lagerbestandsänderungen</strong> sind alle Artikel mit Lagerbestandsänderungen eingetragen, die Amazon übermittelt werden sollten. Dass es eine Änderung im Lagerbestand gibt, sehen Sie auch am Haken im Feld <strong>Dirty</strong>.</li>
<li>Klicken Sie im Menüband auf die Schaltfläche <strong>Exportieren</strong>.<br> Von Amazon wird anschließend eine <strong>Einreichungsfeed Nr.</strong> zurückgemeldet und im Feld <strong>Lagerbestand</strong> ist jetzt die Menge eingetragen, die an Amazon übermittelt wurde. Wenn im Feld <strong>Dirty</strong> kein Haken mehr gesetzt ist, können Sie davon ausgehen, dass der erste Schritt fehlerfrei funktioniert hat. Sobald der Export bei Amazon in Bearbeitung ist, erscheint im Feld <strong>Bemerkung</strong> der Status <em>IN_PROGRESS</em>.</li>
<li>Im zweiten Schritt wird der Lagerbestand im Shop von Amazon aktualisiert. <br> Klicken Sie im Menüband auf die Schaltfläche <strong>Amazon</strong> &gt; <strong>Alle Amazon Feeds aktualisieren</strong>, um sich den aktuellen Stand des Export Prozesses anzeigen zu lassen. <br> Sobald die Änderung erfolgreich abgeschlossen ist, wird im Feld <strong>Exportiert</strong> ein Haken angezeigt. Dagegen weist eine Fehlermeldung im Feld <strong>Export Fehler</strong> darauf hin, dass der Lagerbestand im Shop nicht aktualisiert werden konnte. In diesem Fall wird im Feld <strong>Dirty</strong> automatisch wieder ein Haken gesetzt.</li>
</ol>
<div class="NOTE"><h5>Hinweis</h5><p>Im Feld <strong>Lagerbestand</strong> wird nicht der aktuelle Lagerbestand in Business Central sondern der zuletzt an den Webshop gemeldete Lagerbestand angezeigt.</p>
</div>
<h2 id="so-richten-sie-einen-aufgabenwarteschlangenposten-für-lagerbestandsänderungen-ein">So richten Sie einen Aufgabenwarteschlangenposten für Lagerbestandsänderungen ein</h2>
<p>Um einen Aufgabenwarteschlangenposten für den Export von Lagerbestandsänderungen zu erstellen, gehen Sie vor wie in <a href="https://docs.gws.ms/de-DE/geviserpveo/business-central/gws/veo/features/task-queue-item.html">Aufgabenwarteschlangenposten</a> beschrieben.</p>
<div class="NOTE"><h5>Hinweis</h5><p>Verwenden Sie diese Werte für die Einrichtung:<br></p>
<ul>
<li><strong>Art des auszuführenden Objekts</strong>: <em>Bericht</em></li>
<li><strong>ID des auszuführenden Objekts</strong>: <em>709391253 (Exportiere Webshop Artikel)</em></li>
</ul>
</div>
<h2 id="siehe-auch">Siehe auch</h2>
<p><a href="https://developer-docs.amazon.com/sp-api/docs/tutorial-create-a-private-selling-partner-api-application">Selling Partner API</a><br> <a href="https://docs.gws.ms/de-DE/geviserpveo/business-central/gws/veo/features/task-queue-item.html">Aufgabenwarteschlangenposten</a><br> 
<a href="https://docs.gws.ms/de-DE/geviserpveo/business-central/gws/features/dataexchangeframework/transformationrules.html">Erweiterte benutzerdefinierte Transformationsregeln</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In diesem Artikel</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Zur&#252;ck nach oben</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
